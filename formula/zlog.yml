summary: A reliable, high-performance, thread-safe, flexible, clear-model logging library written in pure C
git-url: https://github.com/HardySimpson/zlog
src-url: https://github.com/HardySimpson/zlog/archive/1.2.16.tar.gz
src-sha: 742401902f2134eb272c49631fe5c38d7aeb9a2ad56fa3ec3d15219b371ba655
license: LGPL-2.1-or-later
dep-pkg: libglob
bsystem: gmake
bscript: src
binbstd: 1

dopatch: sed_in_place '/cp -f/d' makefile

install: |
    gmakew clean &&
    gmakew all \
        CC="$CC" \
        REAL_CFLAGS="'$CPPFLAGS $CFLAGS'" \
        REAL_LDFLAGS="'$LDFLAGS'" \
        DYLIB_MINOR_NAME=libzlog.so \
        DYLIB_MAJOR_NAME=libzlog.so \
        STLIB_MAKE_CMD="'$AR rcs libzlog.a'" &&
    install_libs libzlog.a libzlog.so &&
    install_incs zlog.h &&
    install_bins zlog-chk-conf
