summary: Cross-platform make
web-url: https://www.cmake.org/
git-url: https://github.com/Kitware/CMake
src-url: https://github.com/Kitware/CMake/releases/download/v3.28.2/cmake-3.28.2.tar.gz
src-sha: 1466f872dc1c226f373cf8fba4230ed216a8f108bd54b477b5ccdfd9ea2d124a
license: BSD-3-Clause
dep-pkg: libarchive libcurl libuv jsoncpp expat rhash zlib ncurses openssl
dopatch: |
    LIBCURL="$(pkg-config --libs-only-l libcurl)"
    LIBARCHIVE="$(pkg-config --libs-only-l libarchive)"
    printf 'INPUT(%s %s)\n' "$LIBCURL" "$LIBARCHIVE" > ../lib/libpthread.a

install: |
    cmakew \
        -DBUILD_QtDialog=OFF \
        -DBUILD_CursesDialog=ON \
        -DCMake_BUILD_LTO=ON \
        -DCMAKE_USE_OPENSSL=ON \
        -DCMAKE_USE_SYSTEM_CURL=ON \
        -DCMAKE_USE_SYSTEM_EXPAT=ON \
        -DCMAKE_USE_SYSTEM_FORM=ON \
        -DCMAKE_USE_SYSTEM_JSONCPP=ON \
        -DCMAKE_USE_SYSTEM_LIBARCHIVE=ON \
        -DCMAKE_USE_SYSTEM_LIBRHASH=ON \
        -DCMAKE_USE_SYSTEM_LIBUV=ON \
        -DCMAKE_USE_SYSTEM_ZLIB=ON
