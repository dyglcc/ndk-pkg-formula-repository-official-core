summary: Draw boxes around text
web-url: https://boxes.thomasjensen.com/
git-url: https://github.com/ascii-boxes/boxes
src-url: https://github.com/ascii-boxes/boxes/archive/refs/tags/v2.2.1.tar.gz
src-sha: fa4f7cd1876e4b22e950b4ca7c90776eb8edcf137316bdfd9c1780cf7cfb5d73
license: GPL-2.0-only
dep-upp: gm4 flex bison
dep-pkg: pcre2 libunistring
binbstd: 1

dopatch: |
    sed_in_place 's|STRIP=true||' src/Makefile

    if [ -f ../lib/libunistring.a ] ; then
        "$AR" x ../lib/libiconv.a
        "$AR" x ../lib/libunistring.a
        "$AR" crs ../lib/libunistring.a *.o
        rm -f *.o
    fi

install: |
    export CPPFLAGS="$CPPFLAGS -I. -I../src"
    gmakew clean &&
    gmakew CC="$CC" CFLAGS="'$CPPFLAGS $CFLAGS'" LDFLAGS="'$LDFLAGS'" &&
    run install_bins out/boxes &&
    run install_mans doc/boxes.1 &&
    run install_etcs boxes-config
