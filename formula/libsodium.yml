summary: A modern, portable, easy to use crypto library
web-url: https://libsodium.org
git-url: https://github.com/jedisct1/libsodium
src-url: https://download.libsodium.org/libsodium/releases/libsodium-1.0.19.tar.gz
src-sha: 018d79fe0a045cca07331d37bd0cb57b2e838c51bc48fd837a1472e50068bbea
license: ISC
bsystem: configure

dopatch: |
    # https://github.com/jedisct1/libsodium/issues/1314
    if [ "$TARGET_PLATFORM_ARCH" = aarch64 ] ; then
        export CFLAGS="$CFLAGS -march=armv8-a+crypto"
    fi

    # string.h:80:void* _Nonnull memset_explicit(void* _Nonnull __dst, int __ch, size_t __n) __INTRODUCED_IN(34);
    if [ "$TARGET_PLATFORM_VERS" -lt 34 ] ; then
        export ac_cv_func_memset_explicit=no
    fi
